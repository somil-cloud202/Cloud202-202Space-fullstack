# ============================================================================
# AWS DEPLOYMENT ENVIRONMENT CONFIGURATION
# ============================================================================
# 
# This file contains environment variables for AWS ECS deployment.
# These values should be configured in AWS Secrets Manager and referenced
# in the ECS Task Definition.
#
# CRITICAL: Do not commit actual values to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------

NODE_ENV=production
BASE_URL=https://portal.yourcompany.com
PORT=3000

# ----------------------------------------------------------------------------
# Database Configuration (RDS PostgreSQL)
# ----------------------------------------------------------------------------

# Replace with your RDS endpoint
DATABASE_URL=postgresql://postgres:PASSWORD@myportal-prod.xxxxx.us-east-1.rds.amazonaws.com:5432/myportal

# ----------------------------------------------------------------------------
# Cache Configuration (ElastiCache Redis) - Optional
# ----------------------------------------------------------------------------

# Replace with your ElastiCache endpoint if using Redis
# REDIS_URL=redis://myportal-prod.xxxxx.cache.amazonaws.com:6379

# ----------------------------------------------------------------------------
# AWS Configuration
# ----------------------------------------------------------------------------

# AWS Region where resources are deployed
AWS_REGION=us-east-1

# S3 Bucket Names (created by Terraform or manually)
AWS_S3_BUCKET_PROFILE_PHOTOS=myportal-profile-photos-prod
AWS_S3_BUCKET_DOCUMENTS=myportal-documents-prod
AWS_S3_BUCKET_PAYSLIPS=myportal-payslips-prod
AWS_S3_BUCKET_LEAVE_ATTACHMENTS=myportal-leave-attachments-prod

# CloudFront Distribution Domain (optional, for CDN)
AWS_CLOUDFRONT_DOMAIN=d1234567890abc.cloudfront.net

# ----------------------------------------------------------------------------
# Security & Authentication (Store in AWS Secrets Manager)
# ----------------------------------------------------------------------------

# Admin password for initial setup
# Generate with: openssl rand -base64 32
ADMIN_PASSWORD=<from-secrets-manager>

# JWT secret for token signing
# Generate with: openssl rand -base64 64
JWT_SECRET=<from-secrets-manager>

# ----------------------------------------------------------------------------
# External Services
# ----------------------------------------------------------------------------

# OpenAI API Key for AI features
OPENAI_API_KEY=<from-secrets-manager>

# ----------------------------------------------------------------------------
# DEPLOYMENT NOTES:
# ----------------------------------------------------------------------------
# 
# 1. AWS Credentials:
#    - ECS tasks use IAM roles, no need to set AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY
#    - The ECS task role has permissions to access S3 buckets
#
# 2. Secrets Management:
#    - Store sensitive values (ADMIN_PASSWORD, JWT_SECRET, OPENAI_API_KEY) in AWS Secrets Manager
#    - Reference secrets in ECS Task Definition using "secrets" configuration
#    - Example in task definition:
#      "secrets": [
#        {
#          "name": "JWT_SECRET",
#          "valueFrom": "arn:aws:secretsmanager:us-east-1:ACCOUNT_ID:secret:myportal/prod/jwt-secret"
#        }
#      ]
#
# 3. Database URL:
#    - Use RDS endpoint from Terraform output or AWS Console
#    - Format: postgresql://username:password@endpoint:5432/database
#    - Consider using RDS Proxy for connection pooling in production
#
# 4. S3 Buckets:
#    - Bucket names must be globally unique
#    - Use Terraform to create buckets with proper policies
#    - Profile photos bucket should have public read access
#    - Other buckets should be private with presigned URLs for access
#
# 5. CloudFront (Optional but Recommended):
#    - Use CloudFront for profile photos to reduce latency and costs
#    - Configure CloudFront origin as the S3 profile-photos bucket
#    - Update AWS_CLOUDFRONT_DOMAIN with your distribution domain
#
# ============================================================================
